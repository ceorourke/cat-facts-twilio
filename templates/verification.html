{% extends 'base.html' %}

{% block title %}Prove Yourself!{% endblock %}

{% block content %}

    <h1>Verification</h1>


<div class="container-fluid">
  <div class="row">
    <div class="col-xs-offset-2 col-xs-10 
                col-sm-offset-4 col-sm-6
                col-md-offset-4 col-md-6
                col-lg-offset-3 col-lg-4">

     <p>Please enter the code you were just texted. </p>
     <p> I don't want to text a random person about your cat!</p>
     <!-- <div id="textCode" style="display: none;">{{ code }}</div>  -->

     <div id="textCode" data-name="{{ code }}">{{ code }}</div> 


      <form method="POST" action="/verification">
        <div class="form-group">
          <label class="control-label" for="field-code"><p>Enter your code: </p></label>
          <div class="input-group">
            <div class="input-group-addon">
              <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
            </div>
          <input id="text-code" class="form-control" type="text" name="text-code"
                 placeholder="COOLCAT" required maxlength="50">
          </div>
          <div id="codeCompare"></div>
        </div>
        <input type="submit" id="attempt" value="Attempt!" class="btn btn-primary btn-block">
      </form>
    </div>
  </div>
</div>

<script>
function checkCode(evt) {
  evt.preventDefault();
  var realCode = $('#textCode').data(); // get code from hidden div
  console.log(realCode);
  var userCode = $('#text-code').val(); // get user input
  console.log(userCode);
  if(realCode.name === userCode) { // compare each 
    $('#codeCompare').html("");
    $('#codeCompare').html("It matches, now I need to write code to handle that!");
   } else {
    $('#codeCompare').html("");
    $('#codeCompare').html("Not a match, try again!");
   }
}

 $('#attempt').on('click', checkCode);
</script>

{% endblock %}
